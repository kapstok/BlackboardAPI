<html>
    <body>
        <h1>BlackboardAPI Test Page</h1>
        <h2>User</h2>
        <input type="text" id="idBox" value="_114444_1">
        <p>Load user</p>
        <button onclick="loadUser(document.getElementById('idBox').value)">Submit</button>
        <p>Load Enrolled Courses</p>
        <button onclick="loadEnrolledCourses(document.getElementById('idBox').value)">Get!</button>
        <h2>Courses</h2>
        <input type="text" id="cidBox" value="_20166_1">
        <p>Load Course</p>
        <button onclick="loadCourse(document.getElementById('cidBox').value)">Get</button>
        <button onclick="postCourse()">Post</button>
        <button onclick="deleteCourse(document.getElementById('cidBox').value)">Delete</button>
        <button onclick="patchCourse(document.getElementById('cidBox').value)">Patch</button>
        <p>Load Children</p>
        <button onclick="loadCourseChildren(document.getElementById('cidBox').value)">Get All</button>
        <p>Load Contents</p>
        <button onclick="loadCourseContents(document.getElementById('cidBox').value)">Get All</button>
        <input type="text" id="contentBox" value="_4430884_1">
        <button onclick="loadCourseContent(document.getElementById('cidBox').value, document.getElementById('contentBox').value)">Get</button>
        <script>
            var user = null;
            var course = null;

            function loadUser(userId) {
                if(user == null) {
                    user = userId[0] == '_' ? new BB.BBUserInfoById(userId) : new BB.BBUserInfoByUsername(userId);
                }
                user.getUserInfo().then((result) => {
                    console.log(result);
                })

                console.log(user.getUserName);

                return user;
            }

            function loadEnrolledCourses(userId) {
                if(user == null) return null
                user.getEnrolledCourses().then((result) => {
                    console.log(result);

                })
                return user
            }

            function loadCourse(courseId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.getCourse().then((result) => {
                    console.log(result);
                })
            }

            function postCourse() {
                if(course == null) course = new BB.BBCourse();
                course.postCourse().then((result) => {
                    console.log(result);
                })
            }

            function deleteCourse(courseId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.deleteCourse().then((result) => {
                    console.log(result);
                })
            }

            function patchCourse(courseId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.patchCourse().then((result) => {
                    console.log(result);
                })
            }

            function loadCourseContents(courseId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.getCourseContents().then((result) => {
                    console.log(result);
                })
            }

            function loadCourseChildren(courseId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.getCourseChildren().then((result) => {
                    console.log(result);
                })
            }

            function loadCourseContent(courseId, contentId) {
                if(course == null) course = new BB.BBCourse(courseId);
                course.getCourseContent(contentId).then((result) => {
                    console.log(result);
                })
            }

            window.onload = () => {
                BB.Backend.setBackend(new BB.BBIframeBackend());
            }
        </script>

        <script src="client.js"></script>
    </body>
</html>
